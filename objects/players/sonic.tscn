[gd_scene load_steps=109 format=2]

[ext_resource path="res://scripts/player/states/rolling_player_state.gd" type="Script" id=1]
[ext_resource path="res://scripts/player/states/air_player_state.gd" type="Script" id=2]
[ext_resource path="res://scripts/player/states/regular_player_state.gd" type="Script" id=3]
[ext_resource path="res://scripts/player/states/braking_player_state.gd" type="Script" id=4]
[ext_resource path="res://scripts/player/resources/player_stats.gd" type="Script" id=5]
[ext_resource path="res://sprites/players/super-sonic.png" type="Texture" id=6]
[ext_resource path="res://scripts/player/player_state_machine.gd" type="Script" id=7]
[ext_resource path="res://scripts/player/resources/player_collision.gd" type="Script" id=8]
[ext_resource path="res://scripts/player/player.gd" type="Script" id=9]
[ext_resource path="res://scripts/player/player_skin.gd" type="Script" id=10]
[ext_resource path="res://scripts/player/states/spring_player_state.gd" type="Script" id=11]
[ext_resource path="res://scripts/player/player_audio.gd" type="Script" id=12]
[ext_resource path="res://objects/audios/SpinAudio.tscn" type="PackedScene" id=13]
[ext_resource path="res://objects/audios/BrakeAudio.tscn" type="PackedScene" id=14]
[ext_resource path="res://objects/audios/JumpAudio.tscn" type="PackedScene" id=15]
[ext_resource path="res://objects/shields/insta_shield.tscn" type="PackedScene" id=16]
[ext_resource path="res://scripts/shields/shields_manager.gd" type="Script" id=17]
[ext_resource path="res://objects/shields/blue_shield.tscn" type="PackedScene" id=18]
[ext_resource path="res://objects/shields/thunder_shield.tscn" type="PackedScene" id=19]
[ext_resource path="res://objects/shields/flame_shield.tscn" type="PackedScene" id=20]
[ext_resource path="res://scripts/player/states/spindash_player_state.gd" type="Script" id=21]
[ext_resource path="res://scripts/shields/none.gd" type="Script" id=22]
[ext_resource path="res://audios/effects/spinDashCharge.wav" type="AudioStream" id=23]
[ext_resource path="res://audios/effects/spinDashRelease.wav" type="AudioStream" id=24]
[ext_resource path="res://scripts/player/states/superpeelout_player_state.gd" type="Script" id=25]
[ext_resource path="res://audios/effects/peelOutCharge.wav" type="AudioStream" id=26]
[ext_resource path="res://audios/effects/peelOutRelease.wav" type="AudioStream" id=27]
[ext_resource path="res://sprites/players/spinDash.png" type="Texture" id=28]
[ext_resource path="res://scripts/player/states/dropdash_player_state.gd" type="Script" id=29]
[ext_resource path="res://audios/effects/drop_dash.wav" type="AudioStream" id=30]
[ext_resource path="res://audios/effects/yes.wav" type="AudioStream" id=31]
[ext_resource path="res://scripts/player/states/dead_player_state.gd" type="Script" id=32]
[ext_resource path="res://audios/effects/hurt.wav" type="AudioStream" id=33]
[ext_resource path="res://scripts/player/states/hurt_player_state.gd" type="Script" id=34]
[ext_resource path="res://objects/rings/Ring.tscn" type="PackedScene" id=35]
[ext_resource path="res://audios/effects/loseRings.wav" type="AudioStream" id=36]
[ext_resource path="res://audios/effects/spike.wav" type="AudioStream" id=37]
[ext_resource path="res://objects/audios/RingAudio.tscn" type="PackedScene" id=38]
[ext_resource path="res://objects/shields/bubble_shield.tscn" type="PackedScene" id=39]
[ext_resource path="res://scripts/player/ring_decreaser.gd" type="Script" id=40]
[ext_resource path="res://audios/musics/super_artisian.ogg" type="AudioStream" id=41]
[ext_resource path="res://sprites/players/sonic.png" type="Texture" id=42]
[ext_resource path="res://scripts/player/states/transform_player_state.gd" type="Script" id=43]
[ext_resource path="res://audios/effects/transform_3kup.wav" type="AudioStream" id=44]

[sub_resource type="Resource" id=1]
script = ExtResource( 8 )
offset = Vector2( 0, 0 )
height_radius = 19.0
width_radius = 9.0
push_height_offset = 8.0
push_radius = 1.0
ground_extension = 17.0

[sub_resource type="Resource" id=2]
script = ExtResource( 8 )
offset = Vector2( 0, -5 )
height_radius = 14.0
width_radius = 7.0
push_height_offset = 8.0
push_radius = 3.0
ground_extension = 17.0

[sub_resource type="Resource" id=3]
script = ExtResource( 5 )
acceleration = 168.75
deceleration = 1800.0
friction = 168.75
slope_factor = 450.0
top_speed = 360.0
dash_speed = 600.0
min_speed_to_brake = 240.0
min_speed_to_roll = 60.0
unroll_speed = 30.0
slope_roll_up = 281.25
slope_roll_down = 1125.0
roll_deceleration = 450.0
roll_friction = 84.375
air_acceleration = 337.5
gravity = 787.5
max_jump_height = 390.0
min_jump_height = 240.0
slide_angle = 45.0
fall_angle = 80.0
min_speed_to_fall = 150.0
control_lock_duration = 0.5
drpspd = 480.0
drpmax = 720.0
hurt_x_force = 120.0
hurt_y_force = -240.0
hurt_gravity_force = 11.25

[sub_resource type="Resource" id=55]
script = ExtResource( 5 )
acceleration = 675.0
deceleration = 1800.0
friction = 168.75
slope_factor = 337.5
top_speed = 600.0
dash_speed = 600.0
min_speed_to_brake = 240.0
min_speed_to_roll = 60.0
unroll_speed = 30.0
slope_roll_up = 281.25
slope_roll_down = 1125.0
roll_deceleration = 450.0
roll_friction = 33.75
air_acceleration = 1552.5
gravity = 787.5
max_jump_height = 480.0
min_jump_height = 240.0
slide_angle = 45.0
fall_angle = 80.0
min_speed_to_fall = 150.0
control_lock_duration = 0.5
drpspd = 720.0
drpmax = 780.0
hurt_x_force = 120.0
hurt_y_force = -240.0
hurt_gravity_force = 11.25

[sub_resource type="Shader" id=75]
code = "shader_type canvas_item;


uniform vec4 original_0: hint_color;
uniform vec4 original_1: hint_color;
uniform vec4 original_2: hint_color;
uniform vec4 original_3: hint_color;
uniform vec4 replace_0: hint_color;
uniform vec4 replace_1: hint_color;
uniform vec4 replace_2: hint_color;
uniform vec4 replace_3: hint_color;

const float precision = 0.1;


vec4 swap_color(vec4 color){
	vec4 original_colors[4] = vec4[4] (original_0, original_1, original_2, original_3);
	vec4 replace_colors[4] = vec4[4] (replace_0, replace_1, replace_2, replace_3);
	for (int i = 0; i < 4; i ++) {
		if (distance(color, original_colors[i]) <= precision){
			return replace_colors[i];
		}
	}
	return color;
}


void fragment() {
	COLOR = swap_color(texture(TEXTURE, UV));
}"

[sub_resource type="ShaderMaterial" id=76]
shader = SubResource( 75 )
shader_param/original_0 = Color( 0.141176, 0.141176, 0.564706, 1 )
shader_param/original_1 = Color( 0.141176, 0.282353, 0.847059, 1 )
shader_param/original_2 = Color( 0.282353, 0.282353, 0.988235, 1 )
shader_param/original_3 = Color( 0.423529, 0.423529, 0.988235, 1 )
shader_param/replace_0 = Color( 0.141176, 0.141176, 0.564706, 1 )
shader_param/replace_1 = Color( 0.141176, 0.282353, 0.847059, 1 )
shader_param/replace_2 = Color( 0.423529, 0.423529, 0.988235, 1 )
shader_param/replace_3 = Color( 0.423529, 0.423529, 0.988235, 1 )

[sub_resource type="AtlasTexture" id=29]
atlas = ExtResource( 28 )
region = Rect2( 0, 0, 32, 23 )

[sub_resource type="AtlasTexture" id=30]
atlas = ExtResource( 28 )
region = Rect2( 33, 0, 32, 23 )

[sub_resource type="AtlasTexture" id=31]
atlas = ExtResource( 28 )
region = Rect2( 66, 0, 32, 23 )

[sub_resource type="AtlasTexture" id=32]
atlas = ExtResource( 28 )
region = Rect2( 99, 0, 32, 23 )

[sub_resource type="AtlasTexture" id=33]
atlas = ExtResource( 28 )
region = Rect2( 132, 0, 32, 23 )

[sub_resource type="AtlasTexture" id=34]
atlas = ExtResource( 28 )
region = Rect2( 165, 0, 32, 23 )

[sub_resource type="AtlasTexture" id=35]
atlas = ExtResource( 28 )
region = Rect2( 198, 0, 32, 23 )

[sub_resource type="SpriteFrames" id=36]
animations = [ {
"frames": [ SubResource( 29 ), SubResource( 30 ), SubResource( 31 ), SubResource( 32 ), SubResource( 33 ), SubResource( 34 ), SubResource( 35 ) ],
"loop": true,
"name": "default",
"speed": 25.0
} ]

[sub_resource type="Animation" id=47]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ 36 ]
}

[sub_resource type="Animation" id=39]
resource_name = "balance"
length = 0.45
loop = true
step = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.15, 0.3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ 46, 47, 48 ]
}

[sub_resource type="Animation" id=117]
resource_name = "balancing_super"
length = 0.2
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 46, 47 ]
}

[sub_resource type="Animation" id=4]
resource_name = "corkscrew"
length = 1.2
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71 ]
}

[sub_resource type="Animation" id=22]
resource_name = "crouch"
length = 0.2
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 11, 12 ]
}

[sub_resource type="Animation" id=51]
resource_name = "dead"
length = 0.1
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 45 ]
}

[sub_resource type="Animation" id=37]
resource_name = "dropdash"
length = 0.64
loop = true
step = 0.04
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.04, 0.08, 0.12, 0.16, 0.2, 0.24, 0.28, 0.32, 0.36, 0.4, 0.44, 0.48, 0.52, 0.56, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 87, 88, 89, 90, 87, 91, 89, 92, 87, 93, 89, 94, 87, 95, 89, 96 ]
}

[sub_resource type="Animation" id=53]
resource_name = "hurt"
length = 0.1
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 1,
"values": [ 36 ]
}

[sub_resource type="Animation" id=5]
length = 3.5
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 3, 3.1, 3.5 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 3 ]
}

[sub_resource type="Animation" id=44]
resource_name = "idle-wait"
length = 5.6
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6, 1.8, 2, 2.2, 2.4, 2.6, 2.8, 3, 3.2, 3.8, 4.5, 4.6, 5.3, 5.4 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 3, 4, 3, 4, 3, 4, 3, 4, 3, 4, 3, 4, 3, 4, 3, 4, 5, 6, 7, 8, 7, 3 ]
}

[sub_resource type="Animation" id=116]
resource_name = "idle_super"
length = 0.4
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 0, 1, 2, 1 ]
}

[sub_resource type="Animation" id=28]
resource_name = "lookup"
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ 9, 10 ]
}

[sub_resource type="Animation" id=40]
resource_name = "panic_balance"
length = 0.3
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ 49, 50, 51 ]
}

[sub_resource type="Animation" id=6]
length = 0.8
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 83, 84, 85, 86 ]
}

[sub_resource type="Animation" id=49]
resource_name = "pushing"
length = 2.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.5, 1, 1.5 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 52, 53, 54, 55 ]
}

[sub_resource type="Animation" id=7]
length = 0.8
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 25, 29, 26, 29, 27, 29, 28, 29 ]
}

[sub_resource type="Animation" id=8]
length = 0.8
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 21, 22, 23, 24 ]
}

[sub_resource type="Animation" id=9]
length = 0.4
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3 ),
"transitions": PoolRealArray( 1, 1, 1, 1 ),
"update": 1,
"values": [ 30, 31, 32, 33 ]
}

[sub_resource type="Animation" id=24]
resource_name = "spindash"
length = 0.24
loop = true
step = 0.04
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.04, 0.08, 0.12, 0.16, 0.2 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 42, 37, 38, 39, 40, 41 ]
}

[sub_resource type="Animation" id=120]
resource_name = "transform"
length = 0.9
step = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1, 0.2, 0.3, 0.35, 0.4, 0.45, 0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 97, 98, 100, 101, 102, 101, 102, 101, 102, 101, 102, 101, 102, 101, 102 ]
}

[sub_resource type="Animation" id=10]
length = 1.5
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ 13, 14, 15, 16, 17, 18, 19, 20 ]
}

[sub_resource type="Animation" id=123]
resource_name = "Detransform"
length = 0.9
step = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/replace_0")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.15, 0.3, 0.45, 0.6, 0.75 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.705882, 0.705882, 0, 1 ), Color( 0.988235, 0.988235, 0.988235, 1 ), Color( 0.705882, 0.705882, 0.988235, 1 ), Color( 0.564706, 0.564706, 0.847059, 1 ), Color( 0.423529, 0.423529, 0.705882, 1 ), Color( 0.282353, 0.282353, 0.564706, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:material:shader_param/replace_1")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.15, 0.3, 0.45, 0.6, 0.75 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.988235, 0.988235, 0, 1 ), Color( 0.988235, 0.988235, 0.988235, 1 ), Color( 0.847059, 0.847059, 0.988235, 1 ), Color( 0.705882, 0.705882, 0.988235, 1 ), Color( 0.564706, 0.564706, 0.847059, 1 ), Color( 0.423529, 0.423529, 0.847059, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath(".:material:shader_param/replace_3")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.15, 0.3, 0.45, 0.6, 0.75 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.988235, 0.988235, 0.564706, 1 ), Color( 0.988235, 0.988235, 0.988235, 1 ), Color( 0.988235, 0.988235, 0.988235, 1 ), Color( 0.847059, 0.847059, 0.988235, 1 ), Color( 0.705882, 0.705882, 0.988235, 1 ), Color( 0.423529, 0.423529, 0.988235, 1 ) ]
}

[sub_resource type="Animation" id=113]
resource_name = "NormalPallete"
length = 0.1
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/replace_0")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.141176, 0.141176, 0.564706, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:material:shader_param/replace_1")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.141176, 0.282353, 0.847059, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath(".:material:shader_param/replace_3")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.423529, 0.423529, 0.988235, 1 ) ]
}

[sub_resource type="Animation" id=114]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/replace_0")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.141176, 0.141176, 0.564706, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:material:shader_param/replace_1")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.141176, 0.282353, 0.847059, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath(".:material:shader_param/replace_2")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.423529, 0.423529, 0.988235, 1 ) ]
}
tracks/3/type = "value"
tracks/3/path = NodePath(".:material:shader_param/replace_3")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ Color( 0.423529, 0.423529, 0.988235, 1 ) ]
}

[sub_resource type="Animation" id=115]
resource_name = "SuperPallete"
length = 0.45
loop = true
step = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/replace_0")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.15, 0.3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.988235, 0.988235, 0.847059, 1 ), Color( 0.847059, 0.847059, 0.423529, 1 ), Color( 0.705882, 0.705882, 0, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:material:shader_param/replace_1")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.15, 0.3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.988235, 0.988235, 0.847059, 1 ), Color( 0.988235, 0.988235, 0.564706, 1 ), Color( 0.988235, 0.988235, 0, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath(".:material:shader_param/replace_3")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.15, 0.3 ),
"transitions": PoolRealArray( 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.988235, 0.988235, 0.847059, 1 ), Color( 0.988235, 0.988235, 0.705882, 1 ), Color( 0.988235, 0.988235, 0.564706, 1 ) ]
}

[sub_resource type="Animation" id=122]
resource_name = "Transform"
length = 0.9
step = 0.05
tracks/0/type = "value"
tracks/0/path = NodePath(".:material:shader_param/replace_0")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.2, 0.35, 0.5, 0.65, 0.8 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.282353, 0.282353, 0.564706, 1 ), Color( 0.423529, 0.423529, 0.705882, 1 ), Color( 0.564706, 0.564706, 0.847059, 1 ), Color( 0.705882, 0.705882, 0.988235, 1 ), Color( 0.988235, 0.988235, 0.988235, 1 ), Color( 0.705882, 0.705882, 0, 1 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath(".:material:shader_param/replace_1")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 0.2, 0.35, 0.5, 0.65, 0.8 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.423529, 0.423529, 0.847059, 1 ), Color( 0.564706, 0.564706, 0.847059, 1 ), Color( 0.705882, 0.705882, 0.988235, 1 ), Color( 0.847059, 0.847059, 0.988235, 1 ), Color( 0.988235, 0.988235, 0.988235, 1 ), Color( 0.988235, 0.988235, 0, 1 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath(".:material:shader_param/replace_3")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 0.2, 0.35, 0.5, 0.65, 0.8 ),
"transitions": PoolRealArray( 1, 1, 1, 1, 1, 1 ),
"update": 1,
"values": [ Color( 0.423529, 0.423529, 0.988235, 1 ), Color( 0.705882, 0.705882, 0.988235, 1 ), Color( 0.847059, 0.847059, 0.988235, 1 ), Color( 0.988235, 0.988235, 0.988235, 1 ), Color( 0.988235, 0.988235, 0.988235, 1 ), Color( 0.988235, 0.988235, 0.564706, 1 ) ]
}

[sub_resource type="AnimationNodeAnimation" id=41]
animation = "panic_balance"

[sub_resource type="AnimationNodeAnimation" id=42]
animation = "balance"

[sub_resource type="AnimationNodeAnimation" id=46]
animation = "idle-wait"

[sub_resource type="AnimationNodeAnimation" id=50]
animation = "pushing"

[sub_resource type="AnimationNodeAnimation" id=52]
animation = "dead"

[sub_resource type="AnimationNodeAnimation" id=54]
animation = "hurt"

[sub_resource type="AnimationNodeAnimation" id=118]
animation = "balancing_super"

[sub_resource type="AnimationNodeAnimation" id=119]
animation = "idle_super"

[sub_resource type="AnimationNodeAnimation" id=121]
animation = "transform"

[sub_resource type="AnimationNodeAnimation" id=11]
animation = "walking"

[sub_resource type="AnimationNodeAnimation" id=12]
animation = "running"

[sub_resource type="AnimationNodeAnimation" id=13]
animation = "rolling"

[sub_resource type="AnimationNodeAnimation" id=14]
animation = "peel_out"

[sub_resource type="AnimationNodeAnimation" id=15]
animation = "skidding"

[sub_resource type="AnimationNodeAnimation" id=16]
animation = "corkscrew"

[sub_resource type="AnimationNodeAnimation" id=23]
animation = "crouch"

[sub_resource type="AnimationNodeAnimation" id=38]
animation = "dropdash"

[sub_resource type="AnimationNodeAnimation" id=45]
animation = "idle"

[sub_resource type="AnimationNodeOneShot" id=48]

[sub_resource type="AnimationNodeAnimation" id=25]
animation = "lookup"

[sub_resource type="AnimationNodeTimeScale" id=18]

[sub_resource type="AnimationNodeAnimation" id=27]
animation = "spindash"

[sub_resource type="AnimationNodeTransition" id=19]
input_count = 21
input_0/name = "idle"
input_0/auto_advance = false
input_1/name = "walking"
input_1/auto_advance = false
input_2/name = "running"
input_2/auto_advance = false
input_3/name = "peel_out"
input_3/auto_advance = false
input_4/name = "rolling"
input_4/auto_advance = false
input_5/name = "skidding"
input_5/auto_advance = false
input_6/name = "corkscrew"
input_6/auto_advance = false
input_7/name = "crouch"
input_7/auto_advance = false
input_8/name = "spindash"
input_8/auto_advance = false
input_9/name = "lookup"
input_9/auto_advance = false
input_10/name = "dropdash"
input_10/auto_advance = false
input_11/name = "balance"
input_11/auto_advance = false
input_12/name = "panic_balance"
input_12/auto_advance = false
input_13/name = "idle-wait"
input_13/auto_advance = false
input_14/name = "pushing"
input_14/auto_advance = false
input_15/name = "dead"
input_15/auto_advance = false
input_16/name = "hurt"
input_16/auto_advance = false
input_17/name = "hurt_2"
input_17/auto_advance = false
input_18/name = "idle_super"
input_18/auto_advance = false
input_19/name = "balancing_super"
input_19/auto_advance = false
input_20/name = "transform"
input_20/auto_advance = false

[sub_resource type="AnimationNodeBlendTree" id=20]
graph_offset = Vector2( 199.28, 1216.16 )
nodes/Animation/node = SubResource( 45 )
nodes/Animation/position = Vector2( 260, 100 )
"nodes/Animation 10/node" = SubResource( 41 )
"nodes/Animation 10/position" = Vector2( 160, 1320 )
"nodes/Animation 11/node" = SubResource( 42 )
"nodes/Animation 11/position" = Vector2( 340, 1280 )
"nodes/Animation 12/node" = SubResource( 46 )
"nodes/Animation 12/position" = Vector2( 420, 100 )
"nodes/Animation 13/node" = SubResource( 50 )
"nodes/Animation 13/position" = Vector2( -140, 1180 )
"nodes/Animation 14/node" = SubResource( 52 )
"nodes/Animation 14/position" = Vector2( 540, 1120 )
"nodes/Animation 15/node" = SubResource( 54 )
"nodes/Animation 15/position" = Vector2( 20, 1280 )
"nodes/Animation 16/node" = SubResource( 118 )
"nodes/Animation 16/position" = Vector2( 500, 860 )
"nodes/Animation 17/node" = SubResource( 119 )
"nodes/Animation 17/position" = Vector2( 700, 980 )
"nodes/Animation 18/node" = SubResource( 121 )
"nodes/Animation 18/position" = Vector2( 465.872, 771.24 )
"nodes/Animation 2/node" = SubResource( 11 )
"nodes/Animation 2/position" = Vector2( -140, 280 )
"nodes/Animation 3/node" = SubResource( 12 )
"nodes/Animation 3/position" = Vector2( -140, 400 )
"nodes/Animation 4/node" = SubResource( 13 )
"nodes/Animation 4/position" = Vector2( -140, 640 )
"nodes/Animation 5/node" = SubResource( 14 )
"nodes/Animation 5/position" = Vector2( -140, 520 )
"nodes/Animation 6/node" = SubResource( 15 )
"nodes/Animation 6/position" = Vector2( -140, 760 )
"nodes/Animation 7/node" = SubResource( 16 )
"nodes/Animation 7/position" = Vector2( -140, 880 )
"nodes/Animation 8/node" = SubResource( 23 )
"nodes/Animation 8/position" = Vector2( -140, 40 )
"nodes/Animation 9/node" = SubResource( 38 )
"nodes/Animation 9/position" = Vector2( -140, 1260 )
nodes/idle-shot/node = SubResource( 48 )
nodes/idle-shot/position = Vector2( 718.363, 144.7 )
nodes/lookup/node = SubResource( 25 )
nodes/lookup/position = Vector2( -140, 1080 )
nodes/output/position = Vector2( 580, 380 )
nodes/speed/node = SubResource( 18 )
nodes/speed/position = Vector2( 400, 380 )
nodes/spindash/node = SubResource( 27 )
nodes/spindash/position = Vector2( -140, 980 )
nodes/state/node = SubResource( 19 )
nodes/state/position = Vector2( 220, 380 )
node_connections = [ "idle-shot", 0, "Animation", "idle-shot", 1, "Animation 12", "speed", 0, "state", "state", 0, "idle-shot", "state", 1, "Animation 2", "state", 2, "Animation 3", "state", 3, "Animation 5", "state", 4, "Animation 4", "state", 5, "Animation 6", "state", 6, "Animation 7", "state", 7, "Animation 8", "state", 8, "spindash", "state", 9, "lookup", "state", 10, "Animation 9", "state", 11, "Animation 11", "state", 12, "Animation 10", "state", 14, "Animation 13", "state", 15, "Animation 14", "state", 16, "Animation 15", "state", 18, "Animation 17", "state", 19, "Animation 16", "state", 20, "Animation 18", "output", 0, "speed" ]

[node name="Sonic" type="Node2D"]
pause_mode = 1
script = ExtResource( 9 )
bounds = [ SubResource( 1 ), SubResource( 2 ) ]
stats = [ SubResource( 3 ), SubResource( 55 ) ]
ground_layer = 3
ring = ExtResource( 35 )
super_music = ExtResource( 41 )
super_sonic_texture = ExtResource( 6 )
sonic_texture = ExtResource( 42 )
super_ring_amount = 50

[node name="StateMachine" type="Node2D" parent="."]
script = ExtResource( 7 )

[node name="Regular" type="Node2D" parent="StateMachine"]
script = ExtResource( 3 )

[node name="Rolling" type="Node2D" parent="StateMachine"]
position = Vector2( -212, -716 )
script = ExtResource( 1 )

[node name="Braking" type="Node2D" parent="StateMachine"]
position = Vector2( -212, -716 )
script = ExtResource( 4 )

[node name="Air" type="Node2D" parent="StateMachine"]
script = ExtResource( 2 )

[node name="DropDashTimer" type="Timer" parent="StateMachine/Air"]
wait_time = 0.333

[node name="Spring" type="Node2D" parent="StateMachine"]
script = ExtResource( 11 )

[node name="SpinDash" type="Node2D" parent="StateMachine"]
script = ExtResource( 21 )

[node name="SuperPeelOut" type="Node2D" parent="StateMachine"]
script = ExtResource( 25 )

[node name="DropDash" type="Node2D" parent="StateMachine"]
script = ExtResource( 29 )

[node name="Dead" type="Node2D" parent="StateMachine"]
script = ExtResource( 32 )

[node name="Hurt" type="Node2D" parent="StateMachine"]
script = ExtResource( 34 )

[node name="Transform" type="Node2D" parent="StateMachine"]
script = ExtResource( 43 )

[node name="Shields" type="Node2D" parent="."]
script = ExtResource( 17 )

[node name="InstaShield" parent="Shields" instance=ExtResource( 16 )]

[node name="BlueShield" parent="Shields" instance=ExtResource( 18 )]

[node name="BubbleShield" parent="Shields" instance=ExtResource( 39 )]

[node name="ThunderShield" parent="Shields" instance=ExtResource( 19 )]

[node name="FlameShield" parent="Shields" instance=ExtResource( 20 )]

[node name="None" type="Node2D" parent="Shields"]
script = ExtResource( 22 )

[node name="Audios" type="Node2D" parent="."]
script = ExtResource( 12 )

[node name="JumpAudio" parent="Audios" instance=ExtResource( 15 )]

[node name="BrakeAudio" parent="Audios" instance=ExtResource( 14 )]

[node name="SpinAudio" parent="Audios" instance=ExtResource( 13 )]

[node name="SpinDashCharge" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 23 )

[node name="SpinDashRelease" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 24 )
volume_db = 5.0

[node name="PeeloutCharge" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 26 )

[node name="PeeloutRelease" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 27 )

[node name="DropDash" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 30 )

[node name="Yes" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 31 )

[node name="Hurt" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 33 )

[node name="LoseRings" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 36 )

[node name="Spike" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 37 )

[node name="Transform" type="AudioStreamPlayer" parent="Audios"]
stream = ExtResource( 44 )
volume_db = 7.0

[node name="RingAudio" parent="Audios" instance=ExtResource( 38 )]

[node name="Skin" type="Sprite" parent="."]
material = SubResource( 76 )
texture = ExtResource( 42 )
offset = Vector2( 0, -1 )
hframes = 10
vframes = 11
frame = 36
script = ExtResource( 10 )

[node name="SpinDashDust" type="AnimatedSprite" parent="Skin"]
visible = false
position = Vector2( -15, 8 )
frames = SubResource( 36 )
frame = 6
playing = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="Skin"]
anims/RESET = SubResource( 47 )
anims/balance = SubResource( 39 )
anims/balancing_super = SubResource( 117 )
anims/corkscrew = SubResource( 4 )
anims/crouch = SubResource( 22 )
anims/dead = SubResource( 51 )
anims/dropdash = SubResource( 37 )
anims/hurt = SubResource( 53 )
anims/idle = SubResource( 5 )
anims/idle-wait = SubResource( 44 )
anims/idle_super = SubResource( 116 )
anims/lookup = SubResource( 28 )
anims/panic_balance = SubResource( 40 )
anims/peel_out = SubResource( 6 )
anims/pushing = SubResource( 49 )
anims/rolling = SubResource( 7 )
anims/running = SubResource( 8 )
anims/skidding = SubResource( 9 )
anims/spindash = SubResource( 24 )
anims/transform = SubResource( 120 )
anims/walking = SubResource( 10 )

[node name="PalleteSwapper" type="AnimationPlayer" parent="Skin"]
anims/Detransform = SubResource( 123 )
anims/NormalPallete = SubResource( 113 )
anims/RESET = SubResource( 114 )
anims/SuperPallete = SubResource( 115 )
anims/Transform = SubResource( 122 )

[node name="AnimationTree" type="AnimationTree" parent="Skin"]
pause_mode = 2
tree_root = SubResource( 20 )
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/idle-shot/active = false
parameters/speed/scale = 1.0
parameters/state/current = 0

[node name="DropDustSpawn" type="Position2D" parent="Skin"]
position = Vector2( -8, 3 )

[node name="idle_timer" type="Timer" parent="Skin"]
wait_time = 3.5

[node name="onscreen_check" type="VisibilityNotifier2D" parent="Skin"]
visible = false
position = Vector2( 0, 59 )
scale = Vector2( 2.4, 8.25 )

[node name="LedgeCheckers" type="Node2D" parent="."]
visible = false

[node name="LeftChecker" type="RayCast2D" parent="LedgeCheckers"]
modulate = Color( 0.592157, 1, 0, 1 )
position = Vector2( -9, 2 )
enabled = true
cast_to = Vector2( 0, 20 )
collision_mask = 15

[node name="MidChecker" type="RayCast2D" parent="LedgeCheckers"]
modulate = Color( 0.85098, 0, 1, 1 )
position = Vector2( 0, 2 )
enabled = true
cast_to = Vector2( 0, 20 )
collision_mask = 15

[node name="MidRightChecker" type="RayCast2D" parent="LedgeCheckers"]
modulate = Color( 0.85098, 0, 1, 1 )
position = Vector2( 5, 2 )
enabled = true
cast_to = Vector2( 0, 20 )
collision_mask = 15

[node name="MidLeftChecker" type="RayCast2D" parent="LedgeCheckers"]
modulate = Color( 0.85098, 0, 1, 1 )
position = Vector2( -5, 2 )
enabled = true
cast_to = Vector2( 0, 20 )
collision_mask = 15

[node name="RightChecker" type="RayCast2D" parent="LedgeCheckers"]
modulate = Color( 0.592157, 1, 0, 1 )
position = Vector2( 9, 2 )
enabled = true
cast_to = Vector2( 0, 20 )
collision_mask = 15

[node name="PushCheckers" type="Node2D" parent="."]

[node name="Right" type="RayCast2D" parent="PushCheckers"]
position = Vector2( 7, 0 )
rotation = -1.5708
enabled = true
cast_to = Vector2( -2.38419e-07, 5 )

[node name="Left" type="RayCast2D" parent="PushCheckers"]
position = Vector2( -7, 0 )
rotation = 1.5708
enabled = true
cast_to = Vector2( 2.18557e-07, 5 )

[node name="iframe_timer" type="Timer" parent="."]
wait_time = 2.0

[node name="RingDecreaser" type="Node2D" parent="."]
pause_mode = 1
script = ExtResource( 40 )

[node name="decrease_rings" type="Timer" parent="RingDecreaser"]

[connection signal="ground_enter" from="." to="StateMachine/Hurt" method="_on_Sonic_ground_enter"]
[connection signal="timeout" from="StateMachine/Air/DropDashTimer" to="StateMachine/Air" method="dropdash_timer_timeout"]
[connection signal="animation_finished" from="Skin/PalleteSwapper" to="Skin" method="_on_pallete_swap_finished"]
[connection signal="timeout" from="Skin/idle_timer" to="Skin" method="_on_idle_timer_timeout"]
[connection signal="screen_exited" from="Skin/onscreen_check" to="Skin" method="_on_exit_screen"]
[connection signal="timeout" from="iframe_timer" to="." method="_on_iframe_timer_timeout"]
[connection signal="timeout" from="RingDecreaser/decrease_rings" to="RingDecreaser" method="_on_timeout"]
